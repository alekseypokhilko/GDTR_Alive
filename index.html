<!DOCTYPE html>
<html lang="en">
<style>
    body {
        user-select: none;
        margin: 0px;
        padding: 0px;
    }

    #left-panel {
        margin-bottom: 0px;
        position: absolute;
        top: 10px;
        left: 10px;
        bottom: 10px;
        width: 250px;
    }

    .block {
        padding: 10px;
        border: solid 1px #727272;
        margin-bottom: 10px;
    }

    #editor {
        overflow: scroll;
        position: absolute;
        top: 10px;
        right: 10px;
        bottom: 10px;
        left: 290px;
        border: solid 1px #727272;
    }

    #biker {
        position: absolute;
        width: 120px;
        height: 105px;
        background-image: url('data:image/svg+xml;charset=UTF-8,<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="300mm" height="250mm" version="1.1" style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd" viewBox="0 0 3000000 2500000" xmlns:xlink="http://www.w3.org/1999/xlink"><defs></defs><g id="Слой_x0020_1"><metadata id="CorelCorpID_0Corel-Layer"/><path class="fil0" d="M523190 2358477c-18843,0 -30858,-3560 -45862,-7055l32357 -31144c5673,-5134 5635,-5618 10287,-10879l42023 -42644c12409,8309 17577,14111 38806,14111 -5241,7826 -73801,77611 -77611,77611zm328083 -91722l0 0zm3528 -3528l-3528 3528 3528 -3528zm3527 -3528l-3527 3528 3527 -3528zm3528 -3527l-3528 3527 3528 -3527zm1830917 -3528l0 0zm-1827389 0l-3528 3528 3528 -3528zm1830917 -3528l-3528 3528 3528 -3528zm3527 -3528l-3527 3528 3527 -3528zm3528 -3528l-3528 3528 3528 -3528zm3528 -3527l-3528 3527 3528 -3527zm-2271889 98777c-10597,0 -22759,-7666 -35278,-10583 3667,-13734 38455,-43746 50271,-55562 14957,-14957 41571,-38172 52035,-53799 16740,1393 26646,7056 45861,7056 -6879,10272 -109378,112888 -112889,112888zm430389 -84666l35278 -35278c-3085,11552 -6637,12146 -14885,20393 -8247,8248 -8841,11800 -20393,14885zm38806 -38806l-3528 3528 3528 -3528zm-260233 25518c-823,-26824 919,-20170 23871,-25518l-23871 25518zm1632538 83843c-10597,0 -22759,-7667 -35278,-10583 4073,-15254 18564,-23857 29104,-34396 11436,-11433 20405,-20244 31740,-31761 28454,-28910 19034,-13286 38586,-24916 2110,-1255 5202,-4155 7751,-6451 5714,-5146 -1578,-4165 10216,-7364 8262,-2241 16789,2582 30770,2582 -6879,10273 -109378,112889 -112889,112889zm-1368778 -112889l-3527 3528 3527 -3528zm1799167 28223l35278 -35278c-3085,11552 -6637,12146 -14885,20393 -8247,8248 -8841,11800 -20393,14885zm-497417 49389c-19608,-437 -26154,-9168 -38805,-17639l73201 -74966c9316,-9341 15468,-20171 29104,-23812 0,22694 1421,25123 10584,38805l-57026 55864c-8638,7657 -13898,9914 -17058,21748zm-1298222 -81139l-3528 3527 3528 -3527zm3528 -3528l-3528 3528 3528 -3528zm-546806 98778c-19608,-437 -26154,-9168 -38805,-17639l97911 -99644c10879,6164 20507,12156 32617,14977 -4365,16344 -10379,14923 -24990,31455l-3275 3780c-704,745 -2783,2824 -3528,3528l-21530 20804c-13005,12621 -35329,31237 -38400,42739zm2377723 -102306l-3528 3528 3528 -3528zm-381000 144639c-18843,0 -30858,-3560 -45862,-7056l121794 -121623 68706 -15960c-8352,12474 -141392,144639 -144638,144639zm-1449917 -141111l0 0zm1834444 -7056l-3527 3528 3527 -3528zm3528 -3527l-3528 3527 3528 -3527zm3528 -3528l-3528 3528 3528 -3528zm0 0l0 0zm-2456170 69721l-30913 -23860 6760 -7350c470,-506 1219,-1294 1705,-1823 487,-528 1210,-1292 1700,-1829l36988 -37095c527,-499 1320,-1181 1843,-1685 522,-503 1288,-1214 1801,-1726l8391 -9248c9661,-10545 31960,-26690 36062,-38022 7656,5127 8028,7038 15150,13072 5589,4736 11076,7924 16600,11623l-96087 97943zm1841500 -14111l-30913 -23860 27654 -28790c12022,-10877 64458,-61320 67596,-69988l31750 24694 -96087 97944zm-1900636 -41499c-3161,-11839 -14704,-22099 -21166,-31750 15534,-8220 13925,-12445 25741,-23647l25283 -24107c265,-256 5144,-5030 5342,-5241l26378 -26538c6273,-6664 9754,-12167 19561,-15717 5677,10728 14753,20941 17639,31750l-71436 73203c-8892,8943 -14257,18553 -27342,22047zm1841500 -14111c-3161,-11839 -14704,-22100 -21166,-31750 13154,-6960 17628,-15964 33335,-30165l23031 -22830c497,-530 1176,-1325 1664,-1864 488,-540 1149,-1350 1632,-1896l21401 -20932c505,-521 1183,-1318 1681,-1846l3335 -3721c502,-525 1179,-1322 1694,-1834l14532 -10162c5677,10728 14753,20940 17639,31750 -6641,9918 -84690,91488 -98778,95250zm-1876777 -49389l-7056 0c-2859,-12274 -12015,-28177 -17639,-38806 10304,-3730 15464,-13987 27912,-25004l19561 -19245c2317,-2247 4828,-4754 7055,-7056l47644 -47607c3895,-2317 -2661,-2280 10717,-3393 307,13764 6007,29268 10583,38805l-83084 82721c-6921,6532 -12140,9770 -15693,19585zm462138 215194l334262 -336016c-1639,11680 -3803,20330 -6853,31952 -5896,22464 -5586,21286 -18645,34272l-63547 63453c-4348,4254 -3387,3645 -5131,5453 -4684,4855 -6401,6186 -10718,10448 -7652,7556 -12488,13462 -20820,21514l-45861 45861c-151,155 -3841,4341 -5022,5562 -5413,5595 -5652,5135 -11109,10057 -14059,12680 -27625,29083 -41604,43062 -14381,14382 -27557,29110 -42170,42497 -14529,13312 -41547,16938 -62782,21885zm1379362 -229305l-7056 0c-2859,-12274 -12015,-28177 -17639,-38806 6529,-2363 3171,-1003 6804,-3778l21108 -21226c4927,-4361 -1118,1518 5566,-5018l31619 -31881c528,-499 1321,-1180 1849,-1679l31354 -32146c546,-480 1244,-1257 1834,-1693 6790,-5021 981,-3905 12755,-4884 307,13764 6007,29268 10583,38805 -10431,6986 -12497,12584 -23059,22802l-70577 70535c-4004,5394 -2531,1757 -5141,8969zm462138 215194l334262 -336016c-1639,11680 -3803,20330 -6853,31952 -9049,34478 -19596,32480 -44879,60955l-119843 120046c-151,155 -3841,4341 -5022,5561l-52713 53120c-52529,52529 -36349,48400 -104952,64382zm-1866194 -144639l0 -225777 100269 -44370c20207,-8395 92443,-42835 104342,-43825 18568,79699 -15601,174647 -60997,228281 -30072,35530 -98091,81903 -143614,85691zm1640417 -45861c-15784,-3677 -39452,-23427 -50323,-34344 -95418,-95816 -112607,-240492 -40036,-348820 28257,-42178 49472,-58651 90359,-86030l74792 242810c11784,25100 11067,13506 -4741,53019l-70051 173365zm-1710973 215195c6108,-9121 4220,-5280 12150,-12545 492,-450 6889,-6746 7116,-6995l34533 -36023c40205,-40205 370808,-374451 387174,-385410 0,47747 -9204,46246 -36160,73202l-329847 329847c-29991,29991 -26783,37924 -74966,37924zm1841500 -14111c13068,-19515 432740,-435459 440973,-440973 0,13068 -2072,36279 -7875,45043l-386169 386414c-11257,9016 -28156,9516 -46929,9516zm-2247194 -285750c-1035,-12440 -4837,-20763 -7448,-31900 -3329,-14206 -355,-17886 10933,-28069l94421 -92598c11881,-12508 5959,-9527 22038,-20295 0,17304 -2290,18493 -3208,32070 -1595,23584 3345,18295 -5173,30105l-60257 59687c-712,737 -2708,2899 -3423,3633l-19909 18896c-4548,4361 -3888,3713 -8762,8877l-19212 19594zm1841500 -14112c-2542,-30548 -18536,-37995 -234,-56510l83494 -82479c512,-514 1256,-1247 1779,-1749l22814 -23048c4741,-4601 7455,-5970 12091,-9075 0,13815 -1689,52897 -8381,62175 -4615,6400 -4377,4446 -8973,8665l-54707 54654c-3508,3597 -2434,2516 -5304,5280l-42579 42087zm-1146528 -31750c2588,-11108 5033,-19154 7444,-31361 7341,-37161 -3851,-25989 26222,-54918l61895 -61577c5261,-4652 5745,-4614 10879,-10287 3219,-3556 1781,-2310 4863,-5720l26281 -26636c13689,58760 13317,41363 -62619,117298 -18526,18527 -56636,60928 -74965,73201zm1841500 -14111c22572,-96886 -3381,-45804 84864,-137386l52720 -53114c13689,58761 13317,41363 -62618,117299 -18527,18527 -56637,60928 -74966,73201zm-2547055 -151694l-1941 7585 1941 -7585zm769055 -7056l-52063 53771c-853,-18584 -4026,-16650 -4381,-32604 17524,-1458 36717,-16571 56444,-21167zm1072445 -7055l-1941 7585 1941 -7585zm-1072445 7055l0 0zm1788584 38806c0,-19215 -5663,-29121 -7056,-45861l80256 -78494c9317,-9341 15469,-20171 29105,-23812 11543,49544 28614,19011 -43215,90841 -15400,15399 -43520,46900 -59090,57326zm-2159000 84667l0 232833c-32606,0 -73350,-15435 -96468,-27005 -30736,-15383 -50808,-30410 -73767,-53233 -123006,-122282 -102612,-350814 80803,-439583 83251,-40291 185755,-32184 264458,20239 15282,10179 22049,12261 26057,23332 -38108,20164 -108695,68715 -149659,93758 -26791,16379 -46380,30227 -60334,59613 -20974,44171 8314,65776 10270,76339 957,5164 -1360,2851 -1360,13707zm2134305 -172861c-3583,-15379 -10528,-19900 -14111,-35278 11754,-4255 2382,0 12252,-8915 5422,-4897 2233,-2020 5381,-5202l20843 -21491c558,-473 1382,-1115 1940,-1587l7528 -6584c16303,-15631 31767,-35176 50834,-47943 33449,24507 8957,40614 -10681,59874l-33876 33152c-9952,11260 -25184,30496 -40110,33974zm-1855611 -123473l0 0zm-589139 -14111l0 0zm1746250 296333c0,-62618 -23387,-27765 46743,-97895 30311,-30311 216077,-219557 231952,-230188 969,11654 4589,21165 7055,31750l-41526 29030c-73978,60627 -64791,90788 -97607,124642 -505,521 -1215,1288 -1722,1806l-58312 58105c-5453,5623 -5014,5152 -10607,10560l-49339 49439c-6850,7600 -15176,18603 -26637,22751zm-1742722 -299861l-3528 3528 3528 -3528zm2155472 -10583c72321,-6018 147680,18954 200249,67863 67809,63087 89029,123574 89029,221415 0,79574 -53473,159746 -98705,194100 -61746,46896 -143918,75460 -225851,56372 5718,-24543 69072,-172999 83664,-209163 9992,-24761 22170,-60354 22170,-83643 0,-23504 -65732,-209337 -70556,-246944zm-2155472 10583l0 0zm1837972 -10583l0 0zm-1827389 0l0 0zm1830917 -3528l-3528 3528 3528 -3528zm0 0l0 0zm561751 92559l-22001 -29059 26898 -29546c3211,-2985 4119,-3501 7473,-6639 18107,-16938 43337,-47318 60879,-59065 12833,8594 16300,15687 24694,28223l-97943 96086zm-1817640 -60809c7458,-11138 40781,-46148 52917,-49389l7567 10159c-7230,9564 -51580,36853 -60484,39230zm-575028 -28222c3292,-12326 1342,-7922 10584,-14111 -3292,12326 -1342,7922 -10584,14111zm1841500 -14111l0 0zm-1823861 -7056c-2136,11548 4492,4920 -7055,7056l7055 -7056zm1823861 7056c3292,-12326 1342,-7922 10584,-14111 -3292,12326 -1342,7922 -10584,14111zm17639 -21167c-2136,11548 4492,4920 -7055,7056l7055 -7056zm-1841500 14111c6023,-8993 6046,-11015 17639,-14111 -6022,8994 -6045,11016 -17639,14111zm24695 -21166l0 0zm458611 91722l-35278 -21167 97911 -99644c9005,6316 19742,16010 29089,18505l-17931 24403c-495,532 -1176,1324 -1669,1859l-72122 76044zm-455084 -95250l-3527 3528 3527 -3528zm1813278 10583c6023,-8993 6046,-11015 17639,-14111 -6022,8994 -6045,11016 -17639,14111zm-1809750 -14111l-3528 3528 3528 -3528zm0 0l0 0zm1834445 -7055l0 0zm458611 91722c-12106,-3232 -7987,-3942 -17897,-10326 -6334,-4081 -11270,-6749 -17381,-10841l97911 -99644c9005,6316 19742,16010 29089,18505l0 10584c-9434,3414 -15237,11048 -21262,17543l-26438 26479c-12620,12629 -39621,35541 -44022,47700zm-603250 158750c0,-47853 17754,-68917 41451,-92604l167569 -167570c11340,-11339 21607,-28275 37924,-32632 1073,12889 7481,29016 10583,42334l-179508 176797c-712,737 -2645,2962 -3349,3706l-47494 47756c-7502,7117 -17809,19712 -27176,22213zm148166 -254000l-3527 3528 3527 -3528zm3528 -3528l-3528 3528 3528 -3528zm0 0l0 0zm-1460500 74083c-15599,-3634 -24447,-10184 -42333,-10583 3667,-13734 38455,-43746 50271,-55562 15011,-15012 40107,-43450 55562,-53799 15378,3583 19900,10528 35278,14111 -1728,6472 -1193,3591 -3550,7032 -363,529 -1043,1497 -1466,2063l-19371 19435c-545,483 -1354,1145 -1894,1633l-60080 59865c-7688,7333 -7685,6863 -12417,15805zm1841500 -14111c-15599,-3634 -24447,-10185 -42333,-10583 3917,-14670 96485,-103101 105833,-109361 15378,3583 19900,10528 35278,14111 -2750,10300 -16767,21782 -24387,28530l-61974 61498c-7688,7333 -7685,6863 -12417,15805zm-1929694 -7055c-25251,0 -38984,3528 -59973,3528l127848 -129682c13363,2464 27275,6426 41486,9737 -3499,13102 -2941,8076 -13643,18107l-5270 5314c-3708,3875 -2453,3100 -6853,7258l-49904 48873c-869,787 -5997,5863 -7104,7007 -13882,14347 -14654,12037 -26587,29858zm1841500 -14111c-40349,0 -59980,9195 -45448,-12887 7709,-11715 95713,-89081 112475,-114113 14211,3310 28123,7272 42334,10583 -3499,13102 -2941,8075 -13643,18107l-45921 45801c-504,522 -1189,1313 -1688,1840l-14418 13804c-869,787 -5997,5862 -7104,7007 -6723,6948 -7785,7426 -14263,13960 -6330,6384 -7876,9254 -12324,15898zm-2286000 232833c0,-58097 24118,-75271 60854,-112007 25502,-25502 207498,-212177 221858,-219114 16333,-7891 50168,-13493 70065,-18129 -18345,27396 -119292,118417 -154865,155579 -502,525 -1194,1307 -1687,1841l-49142 49635c-1022,927 -5511,4893 -5603,4981l-3504 3551c-711,738 -2645,2963 -3349,3707 -4701,4965 -6262,6063 -10762,10405 -522,503 -1288,1214 -1801,1727l-122064 117824zm-7056 116417c0,-68750 -22551,-28602 83785,-134938 38491,-38491 74397,-74397 112889,-112889l196342 -195241c512,-513 1237,-1265 1738,-1789 33357,-34858 13293,-29179 77897,-23629l-140630 140812c-705,743 -2608,2999 -3307,3749 -19338,20754 -61053,30563 -105682,74234 -10255,10034 -16778,19373 -26293,30151 -31999,36247 -19782,46494 -53586,80471 -4283,4305 -3291,3135 -7204,6907 -1008,971 -6338,6364 -7007,7104l-15743 16007c-545,482 -1356,1143 -1896,1632l-5407 5175c-4623,4682 -9408,9568 -14076,14147 -731,717 -2810,2796 -3528,3528l-25839 27078c-4560,4821 -2602,2633 -7313,6797l-30133 29839c-2550,2902 -3283,4196 -6551,7561l-18456 13294zm2230420 -397775c-4443,-16224 -11038,-28335 -11448,-46725 4765,-3191 6910,-4652 11986,-9181 42601,-38008 8463,-35336 83193,-28916l-83731 84822zm-784031 -177253l0 0zm0 0c3918,-16816 12416,-25584 19960,-40012 16839,-32208 20758,-25889 67557,-55915l377370 -240041c36509,-25733 36493,6299 43556,28608l20724 74527 -66015 29235c-23530,10131 -42641,19538 -66005,29245 -41880,17400 -374047,168971 -397147,174353zm-28222 -186972c-8780,0 -10789,-5826 -16935,-11288 -51720,-45964 -148755,-117248 -202574,-164314 -9551,-8353 -22846,-22372 -34491,-25482 31901,-60290 67964,-115881 98777,-172861l63501 -105833c3323,12445 9772,14767 18580,23753l146367 171133c35319,40382 51534,15668 143459,29401l167844 12074 -384528 243417zm-28222 -723195c-115788,0 -173414,-142973 -94410,-221410 14746,-14640 14845,-16129 34344,-25627 135951,-66226 252763,105846 151051,207495 -21394,21380 -60241,39542 -90985,39542zm-261056 -141111c0,157398 86491,193365 105833,222250 -5605,24060 -47580,86302 -62011,110850 -24770,42136 -157656,263328 -173465,309840 -10109,29741 -12755,68583 13187,90877 12582,10813 25958,20305 39346,31209l212032 172497c8382,6633 14038,8263 16772,18505 -12572,3357 -28500,15978 -40297,23203l-159660 101395c-40933,24168 -79175,54317 -121070,76485 -8250,-5524 -12921,-11256 -21144,-17662l-274120 -223296c-21220,-14800 -46461,-22123 -71099,-31207l-193342 -81825c-10821,-5266 -19665,-8009 -29486,-12846 -33331,-16416 -72783,-33636 -102788,-55963 -4361,-3244 -5153,-4876 -9527,-8111l-38118 -25373c-20131,-6440 -36487,19560 -36487,40005 0,19300 23063,26522 36004,34552 91763,56940 153819,76146 254250,116166 19445,7748 34834,12547 52414,21670 179971,93394 42538,2185 225366,141523 26140,19922 155181,123612 162216,134117 -20052,5354 -48766,27712 -66331,39503 -21826,14650 -42958,27414 -64197,41636 -16294,-24333 -46810,-46552 -70047,-64009 -9303,-6989 -16112,-12965 -26627,-19234 -39857,-23760 -77501,-42475 -126724,-56720 -142740,-41308 -311585,-8502 -426555,86205 -19292,15891 -30170,26698 -47696,44026 -15806,15626 -27725,31973 -41153,50569 -14309,19816 -23636,33859 -34971,56751l-28106 63616c-52744,134055 -24202,316660 58509,426943 34539,46052 71025,83800 117883,118479 48735,36067 105073,61737 165932,73957 103069,20694 211029,15500 300864,-29107 110138,-54691 180808,-123090 237505,-235217 56583,-111901 50943,-218511 23491,-336342 21422,-1783 135277,-58827 165311,-71051 15406,-6270 40494,-20368 56939,-24199l-79107 143142c-4752,7890 -7577,10997 -11324,20448 -12455,31409 -4706,67831 22331,87955 29423,21899 64355,20824 89999,-340 19498,-16090 77501,-133095 94677,-162852 15207,-26346 31002,-54159 45702,-81298 10122,-18686 51553,-101360 66572,-109817l55888 -25251c148059,-63754 300017,-137512 447004,-198579l153790 -68460c8817,-3960 16159,-6158 24635,-10643 9089,39014 53971,164299 56444,194028 -18079,4212 -41837,20560 -57998,30196 -46705,27851 -80277,62883 -115679,103043 -7699,8733 -12072,16829 -19365,26496 -24315,32231 -43786,75401 -59514,116875 -50950,134353 -22995,314405 59520,424426l26138 33835c47067,55836 103407,95942 168032,128301 40142,20100 92785,34745 140469,39447 84640,8347 184688,-5804 250040,-38255 52125,-25883 99124,-55119 140170,-96190 45721,-45750 66614,-78270 97335,-139026 60953,-120543 56226,-285284 -4730,-406899 -16118,-32158 -29429,-53335 -49350,-81178l-29075 -34425c-11226,-11346 -21889,-23016 -33602,-33425 -73695,-65490 -175822,-112477 -276023,-115560 -22437,-691 -31735,-6104 -58487,-2039 -14186,2156 -49123,5573 -61464,5573 -1543,-18550 -97485,-333900 -112428,-377933 -2980,-8780 -7787,-20010 -9361,-29949 -2434,-15359 2880,-13629 11780,-26661 62779,-91922 -24968,-222430 -135598,-177931 -27751,11162 -9498,13868 -34673,7700 -33166,-8126 -107328,-11550 -146614,-12555 -51575,-1318 -115829,-5803 -169754,-13690 -26117,-3820 -25209,-13716 -42936,-34675l-134091 -155187c-5999,-7139 -7961,-7649 -13019,-15203 70960,0 130476,-36830 166691,-73198 102473,-102907 103843,-268478 99,-372287 -42746,-42773 -115464,-73098 -191485,-73098 -131794,0 -250472,118701 -250472,250472z"/></g></svg>');
        background-size: contain;
        background-repeat: no-repeat;
    }

    #goal {
        position: absolute;
        width: 30px;
        height: 84px;
        left: 100px;
        background-image: url('data:image/svg+xml;charset=UTF-8,<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" width="100mm" height="271mm" version="1.1" style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd" viewBox="0 0 1000000 2710000" xmlns:xlink="http://www.w3.org/1999/xlink"><g id="Слой_x0020_1"><metadata id="CorelCorpID_0Corel-Layer"/><path class="fil0" d="M138403 1139806l0 -49389c13041,-3482 72441,-60522 88718,-73560l42663 -38475c9021,-8442 13691,-10123 22977,-19357 34742,-34550 75073,-63365 111079,-97060l285940 -246755c9405,-7910 13759,-11429 22826,-19506l89020 -76786c15429,-11822 29162,-27625 45860,-38807 15378,3583 19900,10529 35278,14112 -12301,18370 -35601,32432 -52329,46448l-229570 200820c-2336,2174 -1754,1796 -5530,5053l-105745 91810c-8782,7416 -15049,12597 -23030,19303 -3605,3029 -1081,778 -5640,4943 -536,490 -1282,1221 -1813,1715l-209219 182365c-529,496 -1269,1233 -1800,1727l-26624 22765c-558,472 -1370,1128 -1929,1600l-54947 47358c-535,491 -1281,1221 -1810,1717 -529,497 -1269,1234 -1794,1734 -8158,7759 -11801,13346 -22581,16225zm0 -95250c0,-67056 -7560,-50012 30706,-82183l517589 -449022c10500,-8124 11512,-9835 20531,-18275l62646 -53770c17157,3997 25177,13642 42333,17639 -3446,12908 -46236,45838 -59124,57292l-148161 127006c-13156,12312 -26802,25210 -41135,36476l-274580 236947c-8638,8031 -12534,9170 -21200,17606l-63431 56513c-8584,8033 -12507,9073 -21236,17571 -8983,8745 -35214,33603 -44938,36200zm0 -109361c0,-60218 -11862,-53232 40297,-93758l219874 -189348c7847,-7473 9717,-7742 17480,-14271l276210 -238845 38760 21256c-10207,15220 -21347,19575 -34368,32524 -26976,26827 -97933,83824 -128712,111178 -7514,6678 -9682,10336 -18280,16997 -9644,7471 -10517,8998 -18854,16424 -48601,43291 -122378,101114 -169268,144704l-128737 111152c-7514,6679 -9682,10337 -18280,16998l-76122 64989zm0 -109361l0 -59973c23300,-15602 154288,-132167 191017,-161760l116789 -101933c7277,-6765 8575,-6519 15706,-12517l134007 -116465c7139,-5999 7650,-7961 15203,-13019 13081,6922 34008,13331 42333,24695 -11467,3062 -110191,92018 -127889,108471l-322174 277548c-23123,17966 -41365,39131 -64992,54953zm0 -112889c0,-69490 -10354,-50390 74608,-119420l260530 -226303c5662,-4339 52371,-45860 52917,-45860 15530,0 29046,13721 45861,17638 -7731,11547 -61965,55061 -78435,69732l-189220 163557c-10723,8469 -16088,14547 -26642,22747 -12420,9650 -16573,15687 -28220,24697 -19758,15287 -36014,32835 -54956,47350 -15063,11541 -42265,42076 -56443,45862zm0 -116417c0,-36878 -5906,-52213 11443,-66167 9656,-7767 11831,-8904 21196,-17610l208172 -179884c9154,-8912 11140,-10296 20762,-18043 8311,-6693 12002,-11568 20653,-18153 9087,-6916 14682,-11492 21163,-21171l45260 22385 -42580 36740c-14303,12710 -27640,26244 -42978,38161l-218094 187600c-8854,8805 -12573,9972 -21146,17660 -9735,8730 -10719,14976 -23851,18482zm0 -109361l0 -59972c9210,-2459 52638,-41663 64347,-52069l63506 -56439c7249,-6783 8597,-6472 15742,-12480l46906 -41289c7711,-5909 24965,-25261 32821,-26538 9420,-1530 27978,12859 41261,15954 -2961,11088 -2582,9131 -11920,16302 -9141,7019 -9057,6522 -17166,14584 -7864,7816 -9338,8079 -17299,14451l-83086 72136c-23119,19553 -42495,38306 -65613,57859 -7762,6566 -9665,6613 -17505,14245 -7397,7202 -8914,9057 -16715,15035 -16376,12548 -10597,11693 -35279,28221zm0 -109361c0,-75931 -8710,-46329 57292,-104986l63538 -56405c6713,-6277 16744,-13795 23809,-18526 17156,3997 25176,13642 42333,17639 -11966,17869 -48756,44297 -66144,60856 -12498,11903 -111750,98998 -120828,101422zm0 -109361c0,-56836 -6588,-55266 16088,-72107 15929,-11830 32527,-30815 47412,-40782l42292 21248 -105792 91641zm0 -105833l0 -38806 28164 14225c-8536,12720 -15629,16187 -28164,24581zm-116417 2532943l116417 0 10131 -1489174 139714 -121341c5418,-4668 8012,-6309 13545,-11150l12799 -11896c3806,-3382 7035,-5713 11620,-9546l76849 -67790c4754,-3984 8407,-6637 13496,-11198l10923 -10243c4564,-4058 8429,-6899 13497,-11198l63991 -55954c557,-472 1358,-1141 1917,-1611l60503 -52385c530,-496 1270,-1232 1801,-1727l113604 -98063c2246,-1965 3604,-3233 5545,-5038l289676 -253602c-142718,-75517 -326009,-163004 -475074,-237537l-413926 -206963c-20555,-10277 -37178,-24694 -67028,-24694l0 2681110z"/></g></svg>');
        background-size: contain;
        background-repeat: no-repeat;
    }

    .point {
        position: absolute;
        width: 8px;
        height: 8px;
        background-color: #b6e2da;
        border: 2px solid #729aad;
        border-radius: 10px;
    }

    #save-dialog, #open-dialog {
        visibility: hidden;
        position: absolute;
        background-color: #c7ffb9;
        border: solid 1px #727272;
        width: 300px;
        height: 500px;
        left: calc(50% - 150px);
        top: calc(50% - 250px);
        padding: 10px;
    }

    #save-dialog > textarea, #open-dialog > textarea {
        width: 100%;
        height: 100%;
    }
</style>
<head>
    <title>GDTR Alive editor</title>
</head>
<body>
<script>
    //editor.js
    function start() {
        canvas = document.getElementById('editor-canvas');
        canvasWidth = parseInt(canvas.getAttribute('width'));
        canvasHeight = parseInt(canvas.getAttribute('height'));
        canvasX = canvas.getBoundingClientRect().left;
        canvasY = canvas.getBoundingClientRect().top;
        context = canvas.getContext("2d");

        editor = document.getElementById('editor');

        updateCanvas();


        initDraggables();
        document.onmouseup = function () {
            editor.onmousemove = function () {
            };
        }
    }

    function addPoint(x, y) {
        if (mode !== Modes.DRAW) return;
        var point = document.createElement('div');
        point.className = 'point';
        point.style.left = getMouseX() - 6 + "px";
        point.style.top = getMouseY() - 6 + "px";
        initDraggablePoint(point);
        point.oncontextmenu = function () {
            if (mode === Modes.DRAW) deletePoint(this);
            return false;
        }
        points.push(point);
        editor.appendChild(point);
        updateCanvas();
    }

    function initDraggables() {
        var draggables = document.getElementsByClassName('draggable');
        for (var i = 0; i < draggables.length; i++) {
            initDraggable(draggables[i]);
        }
    }


    function initDraggable(draggable) {
        draggable.style.left = getComputedStyle(draggable).left;
        draggable.style.top = getComputedStyle(draggable).top;

        draggable.onmousedown = function () {
            dragging = this;
            ddx = getMouseX() - parseInt(this.style.left);
            ddy = getMouseY() - parseInt(this.style.top);
            editor.onmousemove = function () {
                if (mode === Modes.MOVE) {
                    if (gridOn) {
                        draggable.style.left = (getMouseX() - ddx + ddx % gridX) + "px";
                        draggable.style.top = (getMouseY() - ddy + ddy % gridY) + "px";
                    } else {
                        draggable.style.left = (getMouseX() - ddx) + "px";
                        draggable.style.top = (getMouseY() - ddy) + "px";
                    }
                }
            }
        }
    }


    function initDraggablePoint(point) {
        point.onmousedown = function () {
            currentPoint = this;
            editor.onmousemove = function () {
                if (mode == Modes.MOVE) {
                    currentPoint.style.left = (getMouseX() - 6) + "px";
                    currentPoint.style.top = (getMouseY() - 6) + "px";
                    updateCanvas();
                }
            }
        }
    }

    function deletePoint(point) {
        editor.removeChild(point);
        points.splice(points.indexOf(point), 1);
        updateCanvas();
    }

    window.onload = start;
</script>
<script>
    // variables.js
    var canvas;
    var context;

    //canvas parameters
    var canvasWidth;
    var canvasHeight;
    var canvasX;
    var canvasY;

    //canvas grid step
    var gridX = 2;
    var gridY = 2;

    var editor;

    //track points
    var points = [];

    //Current dragging dot
    var currentPoint;

    var Modes = {DRAW: 1, MOVE: 2};
    var mode = Modes.DRAW;

    var gridOn = true;

    //Drag and drop
    var dragging;
    var ddx;
    var ddy;
</script>
<script>
    // misc.js
    function getMouseX() {
        if (gridOn) {
            var dx = (event.clientX - canvasX + editor.scrollLeft) % gridX;

            if (dx < gridX / 2) return (event.clientX - canvasX + editor.scrollLeft - dx);
            else return (event.clientX - canvasX + editor.scrollLeft - dx + gridX);
        } else {
            return event.clientX - canvasX + editor.scrollLeft;
        }
    }

    function getMouseY() {
        if (gridOn) {
            var dy = (event.clientY - canvasY + editor.scrollTop) % gridY;

            if (dy < gridY / 2) return (event.clientY - canvasY + editor.scrollTop - dy);
            else return (event.clientY - canvasY + editor.scrollTop - dy + gridY);
        } else {
            return event.clientY - canvasY + editor.scrollTop;
        }
    }

    function changeMode() {
        var radiobuttons = document.querySelectorAll("input[name='mode']");
        //console.log(radiobuttons[0].checked);
        if (radiobuttons[0].checked) mode = Modes.DRAW;
        else mode = Modes.MOVE;
    }

    function toggleGrid(checkbox) {
        gridOn = checkbox.checked;
        updateCanvas();
    }

    function uuidv4() {
        return "10000000-1000-4000-8000-100000000000".replace(/[018]/g, c =>
            (+c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> +c / 4).toString(16)
        );
    }
</script>
<script>
    // drawing.js
    function updateCanvas() {
        canvas.setAttribute('width', "" + canvasWidth);
        editor.style.backgroundColor = "#FEC39B";
        if (gridOn) drawGrid();

        drawFilling();
        drawLines();
    }

    function drawGrid() {
        context.strokeStyle = "#b3b3b3";
        context.lineWidth = 1;
        context.beginPath();
        for (var i = gridX - 0.5; i < canvasWidth; i += gridX) {
            context.moveTo(i, 0);
            context.lineTo(i, canvasHeight);
        }
        for (var i = gridY - 0.5; i < canvasHeight; i += gridY) {
            context.moveTo(0, i);
            context.lineTo(canvasWidth, i);
        }
        context.stroke();
    }

    function drawFilling() {
        context.fillStyle = "#AD4542";
        context.lineWidth = 0;
        if (points.length >= 1) {
            context.beginPath();
            context.moveTo(0, parseInt(points[0].style.top) + 6);
            for (var i = 0; i < points.length; i++) {
                context.lineTo(parseInt(points[i].style.left) + 6, parseInt(points[i].style.top) + 6);
            }
            context.lineTo(canvasWidth, parseInt(points[points.length - 1].style.top) + 6);
            context.lineTo(canvasWidth, canvasHeight);
            context.lineTo(0, canvasHeight);
            context.closePath();
            context.fill();
        } else if (points.length == 0) {
            context.beginPath();
            context.moveTo(0, 300);
            context.lineTo(canvasWidth, 300);
            context.lineTo(canvasWidth, canvasHeight);
            context.lineTo(0, canvasHeight);
            context.closePath();
            context.fill();
        }
    }

    function drawLines() {
        context.strokeStyle = "#FF7E4A";
        context.lineWidth = 5;
        if (points.length > 1) {
            for (var i = 0; i < points.length - 1; i++) {
                context.beginPath();
                context.moveTo(parseInt(points[i].style.left) + 6, parseInt(points[i].style.top) + 6);
                context.lineTo(parseInt(points[i + 1].style.left) + 6, parseInt(points[i + 1].style.top) + 6);
                context.stroke();
            }
        }
    }
</script>
<script>
    //processing.js
    function save() {
        var level = {
            "data": {
                "name": "TrackName",
                "author": "Author",
                "startPointIndex": 1,
                "finishPointIndex": 0,
                "points": [],
                "checkBackwardCollision": true,
                "checkFinishCoordinates": true,
                "finishX": 0,
                "finishY": 0,
                "guid": "c47ccc29-cd67-4586-bf91-5a079038b626",
                "invisible": [],
                "leagueSwitchers": [],
                "league": 0,
                "pointsCount": 0,
                "startX": 0,
                "startY": 0
            }
        };
        level.data.name = document.getElementById('level-name').value;
        level.data.author = document.getElementById('author').value;

        var biker = document.getElementById('biker');
        level.data.startX = Math.round((parseInt(biker.style.left) + 60) / 3);
        level.data.startY = -Math.round((parseInt(biker.style.top) + 54) / 3);

        level.data.points = [];
        var i = 0
        for (; i < points.length; i++) {
            var point = [];
            point.push(Math.round((parseInt(points[i].style.left) + 6) / 3));
            point.push(-Math.round((parseInt(points[i].style.top) + 6) / 3));

            level.data.points.push(point);
        }
        level.data.guid = uuidv4();
        level.data.startPointIndex = 1;
        level.data.finishPointIndex = i - 1;
        level.data.pointsCount = points.length;

        saveAsFile(JSON.stringify(level));
    }

    function saveAsFile(string) {
        var blob = new Blob([string], {type: "application/json"});
        var filename = document.getElementById('filename').value;
        var link = document.getElementById("download-link");
        link.download = filename;
        link.href = window.URL.createObjectURL(blob);
    }


    function load() {
        if (true) {
            return
        }
        if (confirm("You previous level will be removed. Continue?")) {
            clear();
            var loadedFile = document.getElementById('loadedFile').files[0];
            var reader = new FileReader();
            reader.onload = function (e) {
                loadLevel(e.target.result);
            };
            reader.readAsText(loadedFile, "UTF-8");

        }
    }

    function loadLevel(JSONString) {
        var level = JSON.parse(JSONString);


        document.getElementById('level-name').value = level.name;
        document.getElementById('author').value = level.author;

        var theme = document.getElementById('theme');
        theme.options.namedItem(level.scheme).selected = true;

        var biker = document.getElementById('biker');
        biker.style.left = (parseInt(level.start[0]) * 3 - 60) + "px";
        biker.style.top = (parseInt(level.start[1]) * 3 - 54) + "px";

        var goal = document.getElementById('goal');
        goal.style.left = (parseInt(level.goal[0]) * 3 + 60) + "px";
        goal.style.top = (parseInt(level.goal[1]) * 3) + "px";

        for (var i = 0; i < level.points.length - 1; i += 2) {
            var x = level.points[i];
            var y = level.points[i + 1];
            addPoint(x, y);
        }
    }

    function clear() {
        while (points.length > 0) {
            editor.removeChild(points[0]);
            points.splice(0, 1);
        }
    }
</script>
<div id="left-panel" class="block">
    <div class="block">
        Editor:<br>
        <input type="radio" name="mode" value="Draw" onclick="changeMode()" checked> Draw
        <input type="radio" name="mode" value="Move" onclick="changeMode()"> Move<br>
        <input type="checkbox" onchange="toggleGrid(this)" checked> Grid
    </div>
    <div class="block">
        Level name:<br>
        <input type="text" id="level-name"><br>
        Author:<br>
        <input type="text" id="author"><br>
    </div>
    <div class="block">
        File:<br>
        <input type="file" id="loadedFile">
        <input type="button" value="Open" onclick="load()"><br><br>
        <input type="text" id="filename" placeholder="Filename">
        <input type="button" value="Save" onclick="save()">
        <a href="#" id="download-link">Download</a>
    </div>
</div>
<div id="editor" onclick="addPoint(-1, -1)">
    <div id="biker" class="draggable"></div>
    <div id="goal" class="draggable"></div>
    <canvas width="5000" height="1060" id="editor-canvas"></canvas>
</div>
</body>
</html>
